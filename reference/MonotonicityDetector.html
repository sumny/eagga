<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Detects whether a feature should have a monotone increasing or decreasing effect (if enforced) and quantifies
the tendency of a monotone relationship between the feature and the target.
This detector utilizes decision trees to fit the feature and target variable using subsampled data and calculates
Spearman's Rho between the predicted values (numeric for regression and probability of the positive class for
binary classification) and the feature.
The Spearman's Rho values serve as indicators of the presence of a monotone relationship between features and the target
and can also help infer the sign of the feature if it should be constrained to have a monotone effect.
Note that this detector only works with integer or numeric features.
Logical features must be converted to integers."><title>Monotonicity Detector — MonotonicityDetector • eagga</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Monotonicity Detector — MonotonicityDetector"><meta property="og:description" content="Detects whether a feature should have a monotone increasing or decreasing effect (if enforced) and quantifies
the tendency of a monotone relationship between the feature and the target.
This detector utilizes decision trees to fit the feature and target variable using subsampled data and calculates
Spearman's Rho between the predicted values (numeric for regression and probability of the positive class for
binary classification) and the feature.
The Spearman's Rho values serve as indicators of the presence of a monotone relationship between features and the target
and can also help infer the sign of the feature if it should be constrained to have a monotone effect.
Note that this detector only works with integer or numeric features.
Logical features must be converted to integers."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">eagga</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9999</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/eagga.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Monotonicity Detector</h1>
      
      <div class="d-none name"><code>MonotonicityDetector.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Detects whether a feature should have a monotone increasing or decreasing effect (if enforced) and quantifies
the tendency of a monotone relationship between the feature and the target.</p>
<p>This detector utilizes decision trees to fit the feature and target variable using subsampled data and calculates
Spearman's Rho between the predicted values (numeric for regression and probability of the positive class for
binary classification) and the feature.
The Spearman's Rho values serve as indicators of the presence of a monotone relationship between features and the target
and can also help infer the sign of the feature if it should be constrained to have a monotone effect.</p>
<p>Note that this detector only works with integer or numeric features.
Logical features must be converted to integers.</p>
    </div>


    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>task</code></dt>
<dd><p>(<a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">mlr3::Task</a>)<br>
The task.</p></dd>


<dt><code>n_features</code></dt>
<dd><p>(integer(1))<br>
The number of features in the <a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">mlr3::Task</a>.</p></dd>


<dt><code>feature_names</code></dt>
<dd><p>(character()) <br>
The names of the features in the <a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">mlr3::Task</a>.</p></dd>


<dt><code>feature_types</code></dt>
<dd><p>(character()) <br>
The types of the features in the <a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">mlr3::Task</a>.</p></dd>


<dt><code>rho_table</code></dt>
<dd><p>(<a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a>)<br>
A data.table with as many rows as features.
It has a "feature_name" column indicating the feature and a "rho" column indicating Spearman's Rho.</p></dd>


<dt><code>unconstrained_weight_table</code></dt>
<dd><p>(<a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a>)<br>
A data.table with as many rows as features.
It has a "feature_name" column indicating the feature and an "unconstrained_weight" column indicating 1 minus the absolute
Spearman's Rho rescaled to the range <code>[0.2, 0.8]</code>.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-MonotonicityDetectorDetector-new"><code>MonotonicityDetector$new()</code></a></p></li>
<li><p><a href="#method-MonotonicityDetectorDetector-compute_rho_table"><code>MonotonicityDetector$compute_rho_table()</code></a></p></li>
<li><p><a href="#method-MonotonicityDetectorDetector-get_sign"><code>MonotonicityDetector$get_sign()</code></a></p></li>
<li><p><a href="#method-MonotonicityDetectorDetector-compute_unconstrained_weight_table"><code>MonotonicityDetector$compute_unconstrained_weight_table()</code></a></p></li>
<li><p><a href="#method-MonotonicityDetectorDetector-clone"><code>MonotonicityDetector$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-MonotonicityDetectorDetector-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Creates a new instance of this <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> class.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/MonotonicityDetector.html">MonotonicityDetector</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">task</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>task</code></dt>
<dd><p>([mlr3::Task)<br>
The task.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-MonotonicityDetectorDetector-compute_rho_table"></a><div class="section">
<h3 id="method-compute-rho-table-">Method <code>compute_rho_table()</code><a class="anchor" aria-label="anchor" href="#method-compute-rho-table-"></a></h3>
<p>Fits a decision tree for each feature and the target variable using subsampled data and calculates Spearman's Rho
between the predicted values (numeric for regression and probability of the positive class for binary classification)
and the feature. This process is repeated for each feature ten times, and the average Spearman's Rho values are stored
in the <code>$rho_table</code>. The subsampling fraction is set to <code>0.9</code>, and the decision tree used is a standard
<a href="https://mlr3.mlr-org.com/reference/LearnerRegr.html" class="external-link">mlr3::LearnerRegr</a> or <a href="https://mlr3.mlr-org.com/reference/LearnerClassif.html" class="external-link">mlr3::LearnerClassif</a>.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">MonotonicityDetector</span><span class="op">$</span><span class="fu">compute_rho_table</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>Invisible (NULL)</p>
</div>

</div><p></p><hr><a id="method-MonotonicityDetectorDetector-get_sign"></a><div class="section">
<h3 id="method-get-sign-">Method <code>get_sign()</code><a class="anchor" aria-label="anchor" href="#method-get-sign-"></a></h3>
<p>Determines the sign of a given feature based on the average Spearman's Rho correlation, if the feature should be
constrained to have a monotone effect.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">MonotonicityDetector</span><span class="op">$</span><span class="fu">get_sign</span><span class="op">(</span><span class="va">feature_name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>feature_name</code></dt>
<dd><p>(character(1))<br>
The feature for which the sign should be determined.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>An integer vector indicating the sign of the feature if it should be constrained to have a monotone effect.</p>
</div>

</div><p></p><hr><a id="method-MonotonicityDetectorDetector-compute_unconstrained_weight_table"></a><div class="section">
<h3 id="method-compute-unconstrained-weight-table-">Method <code>compute_unconstrained_weight_table()</code><a class="anchor" aria-label="anchor" href="#method-compute-unconstrained-weight-table-"></a></h3>
<p>Constructs the unconstrained weights table from the average Spearman's Rhos by taking 1 minus the absolute value and scaling it to the range <code>[0.2, 0.8]</code>.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">MonotonicityDetector</span><span class="op">$</span><span class="fu">compute_unconstrained_weight_table</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>Invisible (NULL)</p>
</div>

</div><p></p><hr><a id="method-MonotonicityDetectorDetector-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">MonotonicityDetector</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Lennart Schneider.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

